<!doctype html>
<html>
    <head>
        <title>Weather</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
        <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.indigo-pink.min.css">
        <script src="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="css/weatherapp.css" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="mobile-web-app-capable" content="yes" />
        <link rel="shortcut icon" sizes="196x196" href="images/icon.png" />
        <link rel="apple-touch-icon-precomposed" href="images/icon.png" />
 

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>          
        
       <script src="http://maps.googleapis.com/maps/api/js"></script> 
        
             
        <style>
       #weather {
       margin-top: 20px;
           left : 50px;
}    
                    
   
        </style>         
                        
    </head>

    <body>
    <div data-role="page" id="page">
      <div data-role="header" data-position="fixed">
         <h4>Weather App</h4>
      </div>
      <div data-role="content">
        <ul data-role="listview" id="weather-list">
			<!-- content is inserted by JavaScript here -->
        </ul>
      </div>
    </div>
           
        
     <section id="weather-list">

      </section>   

        
       
        
    </body>  
    
    <body>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

          <header class="mdl-layout__header">
              <button onclick="location.href = 'index.html';" class="mdl-layout-icon mdl-button mdl-js-button mdl-button--icon"> 
                <i class="material-icons">arrow_back</i>
              </button>
            <div class="mdl-layout__header-row">
              <span class="mdl-layout-title" id="headerBarTitle">View Location</span>
            </div>
          </header>

          <main class="mdl-layout__content">
            <div class="content-grid mdl-grid">
              <div class="mdl-cell">
                <!--   Main page content here:   -->  
                 
<body>
    <p id="div-1b">Select button for weather or map:<p>
    

    <button onclick="GetMeTheWeather()">Location Weather</button> 
    <button onclick="GetMeTheMap()">Location Map</button>
    
        <script>

    function GetandStoreLatLong(){
        
        switch (locationIndex)
            {
               case '0': latit = -37.773;
                       longit = 144.566;    
               break;     
               case '1': latit = -33.773;
                       longit = 151.566;    
               break;
               case '2': latit = -27.773;
                       longit = 153.566;    
               break;
               case '3': latit = -34.973;
                       longit = 138.566;    
               break;
            default:  document.write("Please select a location<br />")
            }
        
     localStorage.clear();            
                 
     localStorage.setItem("latitude", latit);
     localStorage.setItem("longitude", longit);      
        
    }        
            
            
            
    function GetMeTheWeather(){
                 
    localStorage.setItem("locationIndex", locationIndex);
                 
      GetandStoreLatLong();
                 
            var apiKey = 'd79230ac23ff01c34c4447bcc3c6e6d3';
            var url = 'https://api.forecast.io/forecast/';
            var lati =  localStorage.getItem("latitude"); 
            var longi = localStorage.getItem("longitude"); 
            var data;
            var listHTML ;
            var weatherListElement = document.getElementById('weather-list');
            
 /* This code retrieves and presents weather information */                            
                 
jQuery.getJSON(url + apiKey + "/" + lati + "," + longi +"?callback=?", function(data) {
 console.log(data);
jQuery('#div-1b').html("");
jQuery('#div-1b').append('<br>'+ 'The temperature is: ' + data.currently.temperature + '<br>');
jQuery('#div-1b').append('The weather summary is: ' + data.currently.summary + '<br>');  
jQuery('#div-1b').append('The appropriate icon is: ' + data.currently.icon + '<br>');
jQuery('#div-1b').append('The humidity is: ' + data.currently.humidity + '<br>'); 
jQuery('#div-1b').append('Latitude and longitude are: ' + data.latitude + ' and '+ data.longitude + '<br>'); 
jQuery('#div-1b').append('The timezone is: ' + data.timezone);            
            });
        }
           
            
          function GetMeTheMap() {
              
    localStorage.setItem("locationIndex", locationIndex);   
    GetandStoreLatLong();
              
 /* Next line calls html file that controls Google Maps retrieval */             
    window.document.location.href = 'indexGeocoding.html';          
              
          }  
            
            
        </script>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   
    
    </body>
                  
              </div>
            </div>
          </main>    
        </div>

        <!--   JavaScript files:   -->
        <script src="js/locationWeatherCache.js"></script>
        <script src="js/viewLocationPage.js"></script>
    </body>  
      
   
</html>
